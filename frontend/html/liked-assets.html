<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Liked Assets - DALMA AI</title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Sora:wght@300;400;500;600;700;800&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="../src/config.js"></script>
    <!-- CSS -->
    <link rel="stylesheet" href="../css/homepage.css">
    <link rel="stylesheet" href="../css/auth-modal.css">
    
    <link rel="icon" href="../public/con.png" type="image/png">
</head>
<body>
    <!-- Page Content Wrapper -->
    <div class="page-content">
        <!-- Header -->
        <header class="header">
            <div class="logo-section">
                <a href="homepage.html" class="logo-link">
                    <img src="../public/threely3.png" alt="Dalma AI Logo" class="logo">
                </a>
            </div>
            <!-- Regular Navigation (Desktop) -->
            <nav class="nav">
                <div class="nav-left">
                   <a href="homepage.html">Home</a>
                    <a href="homepage.html#assets">Assets</a>
                    <a href="#about" class="active">About</a>
                    <a href="#rig-animate">Rig & Animate</a>
                    <a href="index.html">Generate</a>
                    <!-- Admin navigation items will be dynamically added here -->
                </div>
                <div class="nav-right">
                    <button class="account-btn">Account</button>
                    <!-- Account dropdown will be dynamically added here -->
                </div>
            </nav>
            
            <!-- Hamburger Menu (Mobile) -->
            <div class="hamburger" onclick="toggleMobileNav()">
                <span></span>
                <span></span>
                <span></span>
            </div>
            
            <!-- Mobile Navigation -->
            <nav class="mobile-nav" id="mobileNav">
                <a href="homepage.html">Home</a>
                <a href="homepage.html#assets">Assets</a>
                <a href="#about">About</a>
                <a href="#rig-animate">Rig & Animate</a>
                <a href="index.html">Generate</a>
                <button class="account-btn">Account</button>
            </nav>
        </header>

        <!-- Liked Assets Section -->
        <section class="assets-section" id="liked-assets">
            <div class="assets-header">
                <h2 class="assets-title">Liked Assets</h2>
                <div class="assets-search">
                    <svg class="assets-search-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="11" cy="11" r="8"></circle>
                        <path d="m21 21-4.35-4.35"></path>
                    </svg>
                    <input type="text" class="assets-search-input" placeholder="Search your liked models..." id="assetSearchInput" style="box-shadow: none !important;">
                </div>
            </div>
            
            <!-- Loading State -->
            <div id="loadingSpinner" class="loading-assets" style="display: none;">
                <div style="border: 3px solid rgba(0, 188, 212, 0.2); border-top: 3px solid #00bcd4; border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite;"></div>
                <p>Loading your liked models...</p>
            </div>
            
            <!-- Assets Grid -->
            <div class="assets-grid" id="assetsGrid">
                <!-- Assets will be dynamically loaded here -->
            </div>
            
            <!-- Empty State -->
            <div id="emptyState" class="no-assets" style="display: none; grid-column: 1 / -1; text-align: center; padding: 4rem 2rem; color: rgba(255, 255, 255, 0.6); font-family: 'Inter', sans-serif; flex-direction: column; align-items: center; gap: 1rem;">
                <div style="font-size: 4rem; margin-bottom: 1rem; opacity: 0.6;">üíî</div>
                <h2 style="font-family: 'Sora', sans-serif; font-size: 1.5rem; color: white; margin-bottom: 0.5rem;">No liked models yet</h2>
                <p style="margin-bottom: 2rem;">Start liking models to build your collection!</p>
                <a href="homepage.html#assets" style="background: #00bcd4; color: white; padding: 1rem 2rem; border: none; border-radius: 8px; font-family: 'Sora', sans-serif; font-weight: 600; text-decoration: none; display: inline-block; transition: all 0.3s ease;">Browse Models</a>
            </div>
            
            <!-- Error State -->
            <div id="errorState" class="error-assets" style="display: none; grid-column: 1 / -1; text-align: center; padding: 4rem 2rem; color: #dc3545; font-family: 'Inter', sans-serif; flex-direction: column; align-items: center; gap: 1rem;">
                <div style="font-size: 4rem; margin-bottom: 1rem; opacity: 0.6;">‚ùå</div>
                <h2 style="font-family: 'Sora', sans-serif; font-size: 1.5rem; color: white; margin-bottom: 0.5rem;">Something went wrong</h2>
                <p style="margin-bottom: 2rem;">Failed to load your liked models. Please try again.</p>
                <button id="retryBtn" style="background: rgba(255, 255, 255, 0.1); color: white; padding: 1rem 2rem; border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; font-family: 'Sora', sans-serif; font-weight: 500; cursor: pointer; transition: all 0.3s ease;">Try Again</button>
            </div>
            
            <!-- Pagination -->
            <div id="pagination" class="pagination" style="display: none; justify-content: center; align-items: center; gap: 2rem; margin-top: 3rem;">
                <button id="prevBtn" class="pagination-btn" style="background: rgba(255, 255, 255, 0.08); color: white; border: 1px solid rgba(255, 255, 255, 0.2); padding: 0.8rem 1.5rem; border-radius: 8px; font-family: 'Sora', sans-serif; font-weight: 500; cursor: pointer; transition: all 0.3s ease;">‚Üê Previous</button>
                <div class="pagination-info" style="font-family: 'Inter', sans-serif; color: rgba(255, 255, 255, 0.7);">
                    <span id="pageInfo">Page 1 of 1</span>
                </div>
                <button id="nextBtn" class="pagination-btn" style="background: rgba(255, 255, 255, 0.08); color: white; border: 1px solid rgba(255, 255, 255, 0.2); padding: 0.8rem 1.5rem; border-radius: 8px; font-family: 'Sora', sans-serif; font-weight: 500; cursor: pointer; transition: all 0.3s ease;">Next ‚Üí</button>
            </div>
        </section>

        
    </div>

    
    <!-- Load Scripts -->
    <script src="../src/auth.js"></script>
    <script src="../src/accountDropdown.js"></script>
    
    <!-- Updated Liked Assets JavaScript -->
    <script type="text/javascript">
        // Liked Assets Page JavaScript - Updated with Transition Support
        let currentAssets = [];
        let filteredAssets = [];
        let currentPage = 1;
        let assetsPerPage = 8; // Match homepage
        let currentUser = null;

        // API Configuration
        const API_BASE_URL = `http://${window.location.hostname}:3000/api`;

        // Mobile navigation toggle function
        function toggleMobileNav() {
            const mobileNav = document.getElementById('mobileNav');
            const hamburger = document.querySelector('.hamburger');
            mobileNav.classList.toggle('active');
            hamburger.classList.toggle('active');
        }

        // Make toggleMobileNav globally available
        window.toggleMobileNav = toggleMobileNav;

        // Initialize page when DOM is loaded
        document.addEventListener('DOMContentLoaded', async function() {
            console.log('üöÄ Liked Assets page initializing...');
            
            // Check authentication first and get user info
            const authValid = await checkAuthenticationAndRedirect();
            if (!authValid) {
                return; // Don't continue if auth failed
            }
            
            // Initialize event listeners
            setupEventListeners();
            
            // Load liked assets
            await loadLikedAssets();
            
            console.log('‚úÖ Liked Assets page initialized');
        });

        // Check if user is authenticated, redirect if not
        async function checkAuthenticationAndRedirect() {
    try {
        const response = await fetch(`${API_BASE_URL}/auth/me`, {
            method: 'GET',
            credentials: 'include'
        });
        
        if (!response.ok) {
            console.log('‚ùå User not authenticated');
            sessionStorage.setItem('redirectAfterLogin', window.location.href);
            
            // Try to show auth modal instead of redirecting
            if (window.authManager && typeof window.authManager.showLoginModal === 'function') {
                window.authManager.showLoginModal();
            } else {
                // Show auth required message instead of redirecting to non-existent login.html
                showAuthRequiredMessage();
            }
            return false;
        }
        
        const data = await response.json();
        currentUser = data.user;
        console.log('‚úÖ User authenticated:', data.user.username);
        return true;
        
    } catch (error) {
        console.error('‚ùå Auth check error:', error);
        sessionStorage.setItem('redirectAfterLogin', window.location.href);
        
        // Show auth required message instead of redirecting
        showAuthRequiredMessage();
        return false;
    }
}

// Show authentication required message
function showAuthRequiredMessage() {
    // Hide loading state
    const loadingSpinner = document.getElementById('loadingSpinner');
    if (loadingSpinner) loadingSpinner.style.display = 'none';
    
    // Show auth required state in the main content area
    const assetsGrid = document.getElementById('assetsGrid');
    if (assetsGrid) {
        assetsGrid.style.display = 'flex';
        assetsGrid.style.alignItems = 'center';
        assetsGrid.style.justifyContent = 'center';
        assetsGrid.style.minHeight = '50vh';
        assetsGrid.innerHTML = `
            <div style="text-align: center; padding: 2rem;">
                <h2 style="color: white; margin-bottom: 1rem; font-family: 'Sora', sans-serif;">
                    Authentication Required
                </h2>
                <p style="color: rgba(255, 255, 255, 0.8); margin-bottom: 2rem; max-width: 400px;">
                    You need to be logged in to view your liked assets. Please use the account button to log in.
                </p>
                <button onclick="window.location.href='homepage.html'" style="
                    background: #00bcd4;
                    color: white;
                    border: none;
                    padding: 0.8rem 2rem;
                    border-radius: 8px;
                    font-family: 'Sora', sans-serif;
                    font-weight: 500;
                    cursor: pointer;
                    transition: all 0.3s ease;
                " onmouseover="this.style.background='#00e5ff'" onmouseout="this.style.background='#00bcd4'">
                    Go to Homepage
                </button>
            </div>
        `;
    }
    
    // Hide pagination and empty states
    const pagination = document.getElementById('pagination');
    if (pagination) pagination.style.display = 'none';
    
    const emptyState = document.getElementById('emptyState');
    if (emptyState) emptyState.style.display = 'none';
}

        // Setup event listeners
        function setupEventListeners() {
            const searchInput = document.getElementById('assetSearchInput');
            const retryBtn = document.getElementById('retryBtn');
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            
            // Search functionality
            if (searchInput) {
                searchInput.addEventListener('input', debounce(handleSearch, 300));
                searchInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        handleSearch();
                    }
                });
            }
            
            // Retry button
            if (retryBtn) {
                retryBtn.addEventListener('click', loadLikedAssets);
            }
            
            // Pagination
            if (prevBtn) {
                prevBtn.addEventListener('click', () => changePage(currentPage - 1));
            }
            
            if (nextBtn) {
                nextBtn.addEventListener('click', () => changePage(currentPage + 1));
            }
            
            console.log('‚úÖ Event listeners set up');
        }

        // Load liked assets from API
        async function loadLikedAssets() {
            showLoadingState();
            
            try {
                console.log('üì• Loading liked assets...');
                
                const response = await fetch(`${API_BASE_URL}/auth/liked-assets`, {
                    method: 'GET',
                    credentials: 'include'
                });
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const data = await response.json();
                currentAssets = data.assets || [];
                filteredAssets = [...currentAssets];
                
                console.log('‚úÖ Liked assets loaded:', currentAssets.length);
                console.log('üìä Assets data:', currentAssets);
                
                if (currentAssets.length === 0) {
                    showEmptyState();
                } else {
                    renderAssets();
                    updatePagination();
                }
                
            } catch (error) {
                console.error('‚ùå Error loading liked assets:', error);
                showErrorState();
            }
        }

        // Show loading state
        function showLoadingState() {
            const elements = {
                loading: document.getElementById('loadingSpinner'),
                grid: document.getElementById('assetsGrid'),
                empty: document.getElementById('emptyState'),
                error: document.getElementById('errorState'),
                pagination: document.getElementById('pagination')
            };
            
            if (elements.loading) elements.loading.style.display = 'flex';
            if (elements.grid) elements.grid.style.display = 'none';
            if (elements.empty) elements.empty.style.display = 'none';
            if (elements.error) elements.error.style.display = 'none';
            if (elements.pagination) elements.pagination.style.display = 'none';
        }

        // Show empty state
        function showEmptyState() {
            const elements = {
                loading: document.getElementById('loadingSpinner'),
                grid: document.getElementById('assetsGrid'),
                empty: document.getElementById('emptyState'),
                error: document.getElementById('errorState'),
                pagination: document.getElementById('pagination')
            };
            
            if (elements.loading) elements.loading.style.display = 'none';
            if (elements.grid) elements.grid.style.display = 'none';
            if (elements.empty) elements.empty.style.display = 'flex';
            if (elements.error) elements.error.style.display = 'none';
            if (elements.pagination) elements.pagination.style.display = 'none';
        }

        // Show error state
        function showErrorState() {
            const elements = {
                loading: document.getElementById('loadingSpinner'),
                grid: document.getElementById('assetsGrid'),
                empty: document.getElementById('emptyState'),
                error: document.getElementById('errorState'),
                pagination: document.getElementById('pagination')
            };
            
            if (elements.loading) elements.loading.style.display = 'none';
            if (elements.grid) elements.grid.style.display = 'none';
            if (elements.empty) elements.empty.style.display = 'none';
            if (elements.error) elements.error.style.display = 'flex';
            if (elements.pagination) elements.pagination.style.display = 'none';
        }

        // Render assets grid
        function renderAssets() {
            const assetsGrid = document.getElementById('assetsGrid');
            const startIndex = (currentPage - 1) * assetsPerPage;
            const endIndex = startIndex + assetsPerPage;
            const assetsToShow = filteredAssets.slice(startIndex, endIndex);
            
            // Hide other states
            const elements = {
                loading: document.getElementById('loadingSpinner'),
                empty: document.getElementById('emptyState'),
                error: document.getElementById('errorState')
            };
            
            if (elements.loading) elements.loading.style.display = 'none';
            if (elements.empty) elements.empty.style.display = 'none';
            if (elements.error) elements.error.style.display = 'none';
            
            if (filteredAssets.length === 0) {
                assetsGrid.innerHTML = `
                    <div class="no-results" style="grid-column: 1 / -1; text-align: center; padding: 2rem;">
                        <h3 style="color: rgba(255, 255, 255, 0.8); margin-bottom: 0.5rem;">No models found</h3>
                        <p style="color: rgba(255, 255, 255, 0.6);">Try adjusting your search or filters</p>
                    </div>
                `;
            } else {
                assetsGrid.innerHTML = assetsToShow.map(createAssetCard).join('');
            }
            
            if (assetsGrid) assetsGrid.style.display = 'grid';
            
            console.log(`üìä Rendered ${assetsToShow.length} assets`);
        }

        // Create asset card HTML matching homepage design exactly
        function createAssetCard(asset) {
            // Check for images in priority order (same as homepage)
            let imageUrl = null;
            let imageSource = null;
            
            if (asset.originalImage && asset.originalImage.url) {
                imageUrl = asset.originalImage.url;
                imageSource = 'originalImage';
            } else if (asset.inputImage && asset.inputImage.url) {
                imageUrl = asset.inputImage.url;
                imageSource = 'inputImage';
            } else if (asset.sourceImage && asset.sourceImage.url) {
                imageUrl = asset.sourceImage.url;
                imageSource = 'sourceImage';
            } else if (asset.previewImage && asset.previewImage.url) {
                imageUrl = asset.previewImage.url;
                imageSource = 'previewImage';
            }
            
            const hasImage = !!imageUrl;
            const isLiked = true; // Always true since this is the liked assets page
            
            console.log(`üé® Creating card for "${asset.name}":`, {
                hasImage,
                imageSource,
                imageUrl: imageUrl ? imageUrl.substring(0, 50) + '...' : null
            });
            
            // Exact replica of homepage card structure - NO onclick handler for transition integration
            return `
                <div class="asset-card" data-asset-id="${asset._id}">
                    ${hasImage ? `
                        <div class="asset-preview">
                            <img src="${imageUrl}" 
                                 alt="${escapeHtml(asset.name)}" 
                                 class="asset-preview-img"
                                 onerror="this.parentElement.innerHTML = '<div class=\\'asset-icon\\'>${asset.icon || 'üêï'}</div>';">
                            <!-- Like button -->
                            <button class="asset-like-button ${isLiked ? 'liked' : ''}" 
                                    data-asset-id="${asset._id}"
                                    onclick="event.stopPropagation(); toggleLike('${asset._id}')"
                                    title="${isLiked ? 'Remove from liked models' : 'Add to liked models'}">
                                <svg class="heart-icon" viewBox="0 0 24 24" width="18" height="18">
                                    <path class="heart-outline" d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" fill="none" stroke="currentColor" stroke-width="2"/>
                                    <path class="heart-filled" d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" fill="currentColor" opacity="${isLiked ? '1' : '0'}"/>
                                </svg>
                            </button>
                        </div>
                        <div class="asset-info">
                            <h3 class="asset-name">${escapeHtml(asset.name)}</h3>
                            <div class="asset-stats">
                                <small>${asset.views || 0} views ‚Ä¢ ${asset.downloads || 0} downloads</small>
                            </div>
                        </div>
                    ` : `
                        <div class="asset-icon">${asset.icon || 'üêï'}</div>
                        <h3 class="asset-name">${escapeHtml(asset.name)}</h3>
                        <div class="asset-stats">
                            <small>${asset.views || 0} views ‚Ä¢ ${asset.downloads || 0} downloads</small>
                        </div>
                        <!-- Like button for cards without images -->
                        <button class="asset-like-button ${isLiked ? 'liked' : ''}" 
                                data-asset-id="${asset._id}"
                                onclick="event.stopPropagation(); toggleLike('${asset._id}')"
                                title="${isLiked ? 'Remove from liked models' : 'Add to liked models'}">
                            <svg class="heart-icon" viewBox="0 0 24 24" width="18" height="18">
                                <path class="heart-outline" d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" fill="none" stroke="currentColor" stroke-width="2"/>
                                <path class="heart-filled" d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" fill="currentColor" opacity="${isLiked ? '1' : '0'}"/>
                            </svg>
                        </button>
                    `}
                </div>
            `;
        }

        // Escape HTML to prevent XSS
        function escapeHtml(text) {
            if (!text) return '';
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // Handle search
        function handleSearch() {
            const searchInput = document.getElementById('assetSearchInput');
            if (!searchInput) return;
            
            const searchTerm = searchInput.value.toLowerCase().trim();
            
            if (searchTerm === '') {
                filteredAssets = [...currentAssets];
            } else {
                filteredAssets = currentAssets.filter(asset => 
                    asset.name.toLowerCase().includes(searchTerm) ||
                    asset.breed.toLowerCase().includes(searchTerm) ||
                    (asset.tags && asset.tags.some(tag => tag.toLowerCase().includes(searchTerm)))
                );
            }
            
            currentPage = 1;
            renderAssets();
            updatePagination();
            
            console.log(`üîç Search: "${searchTerm}" - ${filteredAssets.length} results`);
        }

        // Update pagination
        function updatePagination() {
            const totalPages = Math.ceil(filteredAssets.length / assetsPerPage);
            const pagination = document.getElementById('pagination');
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            const pageInfo = document.getElementById('pageInfo');
            
            if (!pagination) return;
            
            if (totalPages <= 1) {
                pagination.style.display = 'none';
                return;
            }
            
            pagination.style.display = 'flex';
            
            if (prevBtn) {
                prevBtn.disabled = currentPage <= 1;
            }
            
            if (nextBtn) {
                nextBtn.disabled = currentPage >= totalPages;
            }
            
            if (pageInfo) {
                pageInfo.textContent = `Page ${currentPage} of ${totalPages}`;
            }
        }

        // Change page
        function changePage(newPage) {
            const totalPages = Math.ceil(filteredAssets.length / assetsPerPage);
            
            if (newPage < 1 || newPage > totalPages) return;
            
            currentPage = newPage;
            renderAssets();
            updatePagination();
            
            // Scroll to top of assets
            const assetsGrid = document.getElementById('assetsGrid');
            if (assetsGrid) {
                assetsGrid.scrollIntoView({ behavior: 'smooth' });
            }
        }

        // Toggle like (unlike in this case)
        async function toggleLike(assetId) {
            try {
                console.log('üíñ Toggling like for asset:', assetId);
                
                const response = await fetch(`${API_BASE_URL}/auth/like-asset`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    credentials: 'include',
                    body: JSON.stringify({ assetId })
                });
                
                if (response.ok) {
                    const data = await response.json();
                    const isLiked = data.isLiked;
                    
                    console.log('üíñ Like toggled successfully:', isLiked ? 'liked' : 'unliked');
                    
                    if (!isLiked) {
                        // Remove from local arrays
                        currentAssets = currentAssets.filter(asset => asset._id !== assetId);
                        filteredAssets = filteredAssets.filter(asset => asset._id !== assetId);
                        
                        // Re-render
                        if (currentAssets.length === 0) {
                            showEmptyState();
                        } else {
                            // Adjust current page if necessary
                            const totalPages = Math.ceil(filteredAssets.length / assetsPerPage);
                            if (currentPage > totalPages && totalPages > 0) {
                                currentPage = totalPages;
                            }
                            renderAssets();
                            updatePagination();
                        }
                        
                        showStatusMessage('Model removed from liked list', 2000);
                    }
                    
                } else {
                    const errorData = await response.json();
                    console.error('‚ùå Error toggling like:', errorData);
                    showStatusMessage('Failed to update like status. Please try again.', 3000);
                }
                
            } catch (error) {
                console.error('‚ùå Error in like functionality:', error);
                showStatusMessage('Network error. Please try again.', 3000);
            }
        }

        // Show status message utility
        function showStatusMessage(message, duration = 3000) {
            // Create or update status message element
            let statusMsg = document.getElementById('tempStatusMessage');
            if (!statusMsg) {
                statusMsg = document.createElement('div');
                statusMsg.id = 'tempStatusMessage';
                statusMsg.style.cssText = `
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    background: rgba(0, 188, 212, 0.9);
                    color: white;
                    padding: 1rem 1.5rem;
                    border-radius: 8px;
                    font-family: 'Sora', sans-serif;
                    font-weight: 500;
                    z-index: 10000;
                    backdrop-filter: blur(10px);
                    box-shadow: 0 4px 20px rgba(0, 188, 212, 0.3);
                    opacity: 0;
                    transform: translateX(100%);
                    transition: all 0.3s ease;
                `;
                document.body.appendChild(statusMsg);
            }
            
            statusMsg.textContent = message;
            
            // Show message
            setTimeout(() => {
                statusMsg.style.opacity = '1';
                statusMsg.style.transform = 'translateX(0)';
            }, 10);
            
            // Hide message after duration
            setTimeout(() => {
                statusMsg.style.opacity = '0';
                statusMsg.style.transform = 'translateX(100%)';
                
                // Remove element after animation
                setTimeout(() => {
                    if (statusMsg.parentNode) {
                        statusMsg.parentNode.removeChild(statusMsg);
                    }
                }, 300);
            }, duration);
        }

        // Debounce utility function
        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }

        // Add keyframe animation for loading spinner and improved search styling
        const style = document.createElement('style');
        style.textContent = `
            @keyframes spin {
                to {
                    transform: rotate(360deg);
                }
            }
            .pagination-btn:hover:not(:disabled) {
                background: rgba(0, 188, 212, 0.2) !important;
                border-color: #00bcd4 !important;
                color: #00bcd4 !important;
            }
            .pagination-btn:disabled {
                opacity: 0.3 !important;
                cursor: not-allowed !important;
            }
            /* Fix search bar styling - remove blue fade */
            .assets-search-input {
                transition: all 0.3s ease !important;
            }
            .assets-search-input:focus {
                outline: none !important;
                background: rgba(255, 255, 255, 0.08) !important;
                border-color: #00bcd4 !important;
                box-shadow: none !important;
            }
            .assets-search-input:hover {
                background: rgba(255, 255, 255, 0.06) !important;
            }
            
            /* Page Content Transition Styles */
            .page-content {
                opacity: 0;
                visibility: hidden;
                transition: opacity 0.8s ease;
            }
            
            .page-content.revealed {
                opacity: 1;
                visibility: visible;
            }
        `;
        document.head.appendChild(style);

        // Remove the direct viewAsset function - let pageTransitionLoader handle it
        // The global transition system will handle asset card clicks via event delegation
        console.log('‚úÖ Liked Assets page integrated with transition system');
    </script>
</body>
</html>